/* Copyright (c) 2022 Advanced Micro Devices, Inc. All rights reserved. */

// ============================================================================
// WARNING!  WARNING!  WARNING!  WARNING!  WARNING!  WARNING!  WARNING!
//
// This code was auto-generated by settings_codegen.py. Do not modify manually.
// ============================================================================

#pragma once

#include <ddSettingsBase.h>
#include <ddSettingsBlob.h>

{% macro prep_cond_begin(prep_cond) %}
{% if prep_cond %}
{{prep_cond}}
{% endif %}
{% endmacro %}

{% macro prep_cond_end(prep_cond) %}
{% if prep_cond %}
#endif
{% endif %}
{% endmacro %}

namespace {{Namespace}}
{
/// Enums /////////////////////////////////////////////////////////////////////
{% for enum in Enums %}
enum {{enum.Name}} : uint32_t
{
{% for variant in enum.Variants %}
{{ prep_cond_begin(variant.BuildFilters) -}}
{{'    '}}{{variant.Name}} = {{variant.Value}}, {% if variant.Description %}// {{variant.Description}}{% endif +%}
{{ prep_cond_end(variant.BuildFilters) -}}
{% endfor %}
};

{% endfor %}

struct {{ComponentName}}Settings : public DevDriver::SettingsData
{
{% for setting in Settings %}
{% if setting.GroupName %}

    struct {
{% for subs in setting.Subsettings %}
{{ prep_cond_begin(subs.BuildFilters) -}}
{{'        '}}{{subs.VariableType}} {{subs.VariableName}}{% if subs.StringLength %}[{{subs.StringLength}}]{% endif %};
{{ prep_cond_end(subs.BuildFilters) -}}
{% endfor %}
    } {{setting.GroupVariableName}};
{% else %}
{{ prep_cond_begin(setting.BuildFilters) -}}
{{'    '}}{{setting.VariableType}} {{setting.VariableName}}{% if setting.StringLength %}[{{setting.StringLength}}]{% endif %};
{{ prep_cond_end(setting.BuildFilters) -}}
{% endif %}
{% endfor %}
};

const uint32_t g_{{ComponentNameLower}}NumSettings = {{NumSettings}};

{% for setting in Settings %}
{% if setting.GroupName %}
{% for subs in setting.Subsettings %}
{{ prep_cond_begin(subs.BuildFilters) -}}
constexpr const char* p{{setting.GroupName}}_{{subs.Name}}HashStr = "#{{subs.NameHash}}";
{{ prep_cond_end(subs.BuildFilters) -}}
{% endfor %}
{% else %}
{{ prep_cond_begin(setting.BuildFilters) -}}
constexpr const char* p{{setting.Name}}HashStr = "#{{setting.NameHash}}";
{{ prep_cond_end(setting.BuildFilters) -}}
{% endif %}
{% endfor %}

// =======================================================================================
// SettingsBlob

class {{ComponentName}}SettingsBlobNode : public DevDriver::SettingsBlobNode
{
public:
    const uint8_t* GetBlob(uint32_t* pOutSize) override;
    bool IsEncoded() override;
    uint64_t GetBlobHash() override;
};

} // namespace {{Namespace}}
